dsl_version: 0.4.0
service:
  name: glance-registry
  ports:
    - {{ glance.registry_port }}
  annotations:
    service:
      prometheus.io/probe: "true"
      prometheus.io/probe_path: "/healthcheck"
  containers:
    - name: glance-registry
      image: glance-registry
      daemon:
        files:
          - glance-registry-conf
        dependencies:
          - glance-db-sync
        command: glance-registry

files:
  glance-registry-conf:
    path: /etc/glance/glance-registry.conf
    content: glance-registry.conf.j2
